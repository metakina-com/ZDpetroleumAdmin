(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cb4feb6"],{"026a":function(t,e,o){},"07e5":function(t,e,o){"use strict";o("b77f")},"290b":function(t,e,o){"use strict";o("55b1")},"333d":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[o("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];o("a9e3");Math.easeInOutQuad=function(t,e,o,i){return t/=i/2,t<1?o/2*t*t+e:(t--,-o/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,o){var i=l(),n=t-i,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var l=Math.easeInOutQuad(c,i,n,e);r(l),c<e?a(t):o&&"function"===typeof o&&o()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:400},pageSizes:{type:Array,default:function(){return[10,20,30,50,350]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,p=(o("07e5"),o("2877")),d=Object(p["a"])(u,i,n,!1,null,"5f0aab43",null);e["a"]=d.exports},"3ff2":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"quill-upload",action:t.ossUploadUrl,headers:t.headers,multiple:!1,"list-type":"picture-card","show-file-list":!1,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.handleExceed,"on-progress":t.handleProgress}},[o("el-button",{attrs:{size:"small",type:"primary"}}),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])],1),o("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.uillUpdateImg,expression:"uillUpdateImg"}]},[o("quillEditor",{ref:"myQuillEditor",staticStyle:{width:"100%",height:"600px"},attrs:{options:t.editorOption},on:{change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)},n=[],a=(o("a753"),o("8096"),o("14e1"),o("953d")),r=o("fa7d"),l=o("5f87"),s={props:{value:String},data:function(){return{ossUploadUrl:"".concat(r["a"].baseUrl,"/sysAdmin/uploadPictures"),headers:"",fileList:[],uillUpdateImg:!1,serverUrl:"",content:"",editorOption:{placeholder:"",theme:"snow",modules:{toolbar:{container:[["bold"],["italic"],["underline"],["strike"],[{list:"ordered"},{list:"bullet"}],["blockquote"],["code-block"],["link"],["image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}]],handlers:{image:function(t){t?document.querySelector("#quill-upload input").click():this.quill.format("image",!1)}}}}}}},components:{quillEditor:a["quillEditor"]},created:function(){this.headers={token:Object(l["a"])()}},watch:{value:function(t){this.initValue()}},mounted:function(){this.initValue(),console.log(r["a"],"baseURL")},methods:{initValue:function(){this.content=this.value},onEditorChange:function(t){t.quill;var e=t.html;t.text;this.content=e,this.$emit("input",e)},beforeUpload:function(){this.uillUpdateImg=!0},uploadError:function(){this.uillUpdateImg=!1,this.$message.error("图片插入失败")},handleProgress:function(t,e,o){console.log(e,o,"图片上传")},handleExceed:function(t,e,o){var i=this.$refs.myQuillEditor.quill;if(console.log(t),"SUCCEED"==t.status){var n=i.getSelection().index;i.insertEmbed(n,"image",t.result),console.log(i),i.setSelection(n+1)}else this.$message.error("图片插入失败");this.fileList=o,this.uillUpdateImg=!1}}},c=s,u=(o("83bb"),o("2877")),p=Object(u["a"])(c,i,n,!1,null,null,null);e["a"]=p.exports},"55b1":function(t,e,o){},"83bb":function(t,e,o){"use strict";o("026a")},b77f:function(t,e,o){},fb0f:function(t,e,o){"use strict";o.r(e);var i,n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user"},[o("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v(" 添加轮播图")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"","tooltip-effect":"dark"}},[o("el-table-column",{attrs:{prop:"bannerUrl",label:"图片","min-width":"650",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{attrs:{src:t.row.bannerUrl,"min-width":"150",height:"100"}})]}}])}),o("el-table-column",{attrs:{prop:"bannerUrl",label:"PC/APP","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["PC_BANNER"==e.row.bannerType?o("p",[t._v("PC")]):o("p",[t._v("APP")])]}}])}),o("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"105",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return t.del(e)}}},[t._v(" 删除 ")])]}}])})],1),o("el-dialog",{attrs:{visible:t.dialogamend,fullscreen:!0,width:"100%"},on:{"update:visible":function(e){t.dialogamend=e}}},[o("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.modifyData}},[o("el-form-item",{attrs:{label:"上传方式"}},[o("el-select",{attrs:{placeholder:"选择上传方式"},on:{change:t.controlTypeChange},model:{value:t.modifyData.bannerType,callback:function(e){t.$set(t.modifyData,"bannerType",e)},expression:"modifyData.bannerType"}},t._l(t.options,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),o("h4",{staticStyle:{color:"red"}},[t._v("请先选择上传方式，选择图片并上传裁剪框对应尺寸")]),o("div",{staticClass:"cropper-content"},[o("div",{staticClass:"cropper-box"},[o("div",{staticClass:"cropper"},[o("vue-cropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.outputSize,outputType:t.option.outputType,info:t.option.info,canScale:t.option.canScale,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,full:t.option.full,fixedBox:t.option.fixedBox,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,centerBox:t.option.centerBox,height:t.option.height,infoTrue:t.option.infoTrue,maxImgSize:t.option.maxImgSize,enlarge:t.option.enlarge,mode:t.option.mode},on:{realTime:t.realTime,imgLoad:t.imgLoad}})],1),o("div",{staticClass:"footer-btn"},[o("div",{staticClass:"scope-btn"},[o("label",{staticClass:"btn",attrs:{for:"uploads"}},[t._v("选择图片")]),o("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.selectImg(e)}}}),o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-in"},on:{click:function(e){return t.changeScale(1)}}},[t._v("放大 ")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-out"},on:{click:function(e){return t.changeScale(-1)}}},[t._v(" 缩小 ")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateLeft}},[t._v("↺ 左旋转")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateRight}},[t._v("↻ 右旋转")])],1),o("div",{staticClass:"upload-btn"},[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.uploadImg("blob")}}},[t._v("上传轮播图 "),o("i",{staticClass:"el-icon-upload"})])],1)])]),o("div",{staticClass:"show-preview"},[o("div",{staticClass:"preview",style:t.previews.div},[o("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogamend=!1}}},[t._v(" 关闭 ")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.amendList()}}},[t._v(" 确定 ")])],1)],1),o("el-dialog",{attrs:{visible:t.xiugailunbo,fullscreen:!0},on:{"update:visible":function(e){t.xiugailunbo=e}}},[o("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.modifyData}},[o("el-form-item",{attrs:{label:"上传方式"}},[o("el-select",{attrs:{placeholder:"选择上传方式"},on:{change:t.controlTypeChange},model:{value:t.modifyData.bannerType,callback:function(e){t.$set(t.modifyData,"bannerType",e)},expression:"modifyData.bannerType"}},t._l(t.options,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),o("h4",{staticStyle:{color:"red"}},[t._v("请先选择上传方式，选择图片并上传裁剪框对应尺寸")]),o("div",{staticClass:"cropper-content"},[o("div",{staticClass:"cropper-box"},[o("div",{staticClass:"cropper"},[o("vue-cropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.outputSize,outputType:t.option.outputType,info:t.option.info,canScale:t.option.canScale,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,full:t.option.full,fixedBox:t.option.fixedBox,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,centerBox:t.option.centerBox,height:t.option.height,infoTrue:t.option.infoTrue,maxImgSize:t.option.maxImgSize,enlarge:t.option.enlarge,mode:t.option.mode},on:{realTime:t.realTime,imgLoad:t.imgLoad}})],1),o("div",{staticClass:"footer-btn"},[o("div",{staticClass:"scope-btn"},[o("label",{staticClass:"btn",attrs:{for:"uploads"}},[t._v("选择图片")]),o("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.selectImg(e)}}}),o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-in"},on:{click:function(e){return t.changeScale(1)}}},[t._v("放大 ")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-out"},on:{click:function(e){return t.changeScale(-1)}}},[t._v(" 缩小 ")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateLeft}},[t._v("↺ 左旋转")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateRight}},[t._v("↻ 右旋转")])],1),o("div",{staticClass:"upload-btn"},[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.uploadImg("blob")}}},[t._v("上传轮播图 "),o("i",{staticClass:"el-icon-upload"})])],1)])]),o("div",{staticClass:"show-preview"},[o("div",{staticClass:"preview",style:t.previews.div},[o("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.xiugailunbo=!1}}},[t._v(" 关闭 ")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.alter()}}},[t._v(" 确定 ")])],1)],1)],1)},a=[],r=o("ade3"),l=o("c7eb"),s=o("1da1"),c=o("53ca"),u=(o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861"),o("ac1f"),o("00b4"),o("3ff2")),p=o("7e79"),d=(o("c24f"),o("333d"),{name:"",components:{VueCropper:p["VueCropper"],QuillEditor:u["a"]},data:function(){return{options:[{label:"PC",value:"PC_BANNER"},{label:"APP",value:"DATA_BANNER"}],listQuery:{},xiugailunbo:!1,dialogamend:!1,name:this.Name,previews:{},option:{img:"",outputSize:1,outputType:"jpeg",info:!0,canScale:!0,autoCrop:!0,autoCropWidth:750,autoCropHeight:300,fixed:!0,fixedNumber:[1,1],full:!1,fixedBox:!0,canMove:!1,canMoveBox:!0,original:!1,centerBox:!1,height:!0,infoTrue:!1,maxImgSize:3e3,enlarge:1,mode:"300px 750px"},list:null,modifyData:{bannerUrl:"",id:"",linkUrl:"",global:"CHINESE_SIM"},id:""}},created:function(){this.getlist()},mounted:function(){},methods:(i={controlTypeChange:function(t){console.log(t),"PC_BANNER"==t?(this.option.autoCropWidth=960,this.option.autoCropHeight=270,this.option.fixedNumber=[32,9]):(this.option.autoCropWidth=690,this.option.autoCropHeight=280,this.option.fixedNumber=[2.46,1])},xiugai:function(t){this.modifyData.bannerUrl="",console.log(t.row),this.modifyData.id=t.row.id,this.xiugailunbo=!0},beforeAvatarUpload:function(t){var e=this,o=t.size/1024/1024<2,i=new Promise((function(e,o){var i=750,n=656,a=window.URL||window.webkitURL,r=new Image;r.onload=function(){var t=r.width===i&&r.height===n;t?e():o()},r.src=a.createObjectURL(t)})).then((function(){return t}),(function(){return e.$message.error("图片尺寸限制为750 x 656 , 大小不可超过2MB"),Promise.reject()}));return o||e.$message.error("图片尺寸限制为750 x 656, "),console.log(i),i},alter:function(){var t=this;""!=this.modifyData.bannerUrl?this.$http.post1("/sysAdmin/upBanner",this.modifyData).then((function(e){"SUCCEED"==e.status?(t.$message({message:"操作成功",type:"success"}),t.getlist()):t.$message({message:e.errorMessage,type:"error"}),t.getlist(),t.xiugailunbo=!1,t.option.img=""})).catch((function(t){console.log(t)})):this.$message.error("请上传轮播图")},getlist:function(){var t=this;this.$http.get("/admin/sysAdmin/getBanners").then((function(e){t.list=e.result.records})).catch((function(t){console.log(t)}))},handleCreate:function(){this.dialogamend=!0},amendList:function(){var t=this;""!=this.modifyData.bannerUrl?(console.log(this.modifyData),this.$http.post1("/admin/sysAdmin/addBanner",this.modifyData).then((function(e){"SUCCEED"==e.status?(t.$message({message:"操作成功",type:"success"}),t.getlist()):t.$message({message:e.errorMessage,type:"error"}),t.dialogamend=!1,t.getlist(),t.option.img=""})).catch((function(t){console.log(t)}))):this.$message.error("请上传轮播图")},realTime:function(t){this.previews=t},imgLoad:function(t){},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()}},Object(r["a"])(i,"realTime",(function(t){this.previews=t})),Object(r["a"])(i,"selectImg",(function(t){var e=this,o=t.target.files[0];if(!/\.(jpg|jpeg|png|JPG|PNG)$/.test(t.target.value))return this.$message({message:"图片类型要求：jpeg、jpg、png",type:"error"}),!1;var i=new FileReader;i.onload=function(t){var o;o="object"===Object(c["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,e.option.img=o},i.readAsDataURL(o)})),Object(r["a"])(i,"uploadImg",(function(t){var e=this;console.log(t);"blob"===t&&this.$refs.cropper.getCropBlob(function(){var t=Object(s["a"])(Object(l["a"])().mark((function t(o){var i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(o),i=new FormData,i.append("file",o,"DX.jpg"),console.log(i),e.$http.post1("/admin/sysAdmin/uploadImge",i).then((function(t){"SUCCEED"==t.status?(e.modifyData.bannerUrl=t.result,e.modifyData.linkUrl=t.result,e.$message({message:"图片上传成功",type:"success"}),console.log(e.modifyData.bannerUrl)):e.$message({message:t.errorMessage,type:"error"})})).catch((function(t){console.log(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),Object(r["a"])(i,"addmarketClick",(function(){})),Object(r["a"])(i,"del",(function(t){var e=this,o=t.row.id;this.$confirm("确认删除该轮播图 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.post("/admin/sysAdmin/delBanner",{id:o}).then((function(t){e.$message({message:"图片删除成功",type:"success"}),e.getlist()})).catch((function(t){console.log(t)}))}))})),i)}),g=d,f=(o("290b"),o("2877")),m=Object(f["a"])(g,n,a,!1,null,"ba501688",null);e["default"]=m.exports}}]);