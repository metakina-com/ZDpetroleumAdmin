(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e7f85a7"],{"026a":function(t,e,i){},"202d":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("el-button",{staticStyle:{"margin-right":"10px","margin-top":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.tianjia}},[t._v(" 添加公告")]),i("el-dialog",{attrs:{visible:t.dialogamend,fullscreen:!1},on:{"update:visible":function(e){t.dialogamend=e}}},[i("el-form",{ref:"form",attrs:{model:t.modifyData,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[i("el-input",{attrs:{min:"0"},model:{value:t.modifyData.title,callback:function(e){t.$set(t.modifyData,"title",e)},expression:"modifyData.title"}})],1),i("el-form-item",{attrs:{label:"链接地址",prop:"titleEn"}},[i("el-input",{attrs:{min:"0"},model:{value:t.modifyData.linkUrl,callback:function(e){t.$set(t.modifyData,"linkUrl",e)},expression:"modifyData.linkUrl"}})],1),i("el-form-item",{attrs:{label:"公告内容",prop:"titleEn"}},[i("Quilleditor",{model:{value:t.modifyData.content,callback:function(e){t.$set(t.modifyData,"content",e)},expression:"modifyData.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogamend=!1}}},[t._v(" 关闭 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.amendList()}}},[t._v(" 确定 ")])],1)],1),i("el-dialog",{attrs:{visible:t.xiugaigongg,fullscreen:!1},on:{"update:visible":function(e){t.xiugaigongg=e}}},[i("el-form",{ref:"form",attrs:{model:t.modifyData,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[i("el-input",{attrs:{min:"0"},model:{value:t.modifyData.title,callback:function(e){t.$set(t.modifyData,"title",e)},expression:"modifyData.title"}})],1),i("el-form-item",{attrs:{label:"链接地址",prop:"linkUrl"}},[i("el-input",{attrs:{min:"0"},model:{value:t.modifyData.linkUrl,callback:function(e){t.$set(t.modifyData,"linkUrl",e)},expression:"modifyData.linkUrl"}})],1),i("el-form-item",{attrs:{label:"公告内容",prop:"titleEn"}},[i("Quilleditor",{model:{value:t.modifyData.content,callback:function(e){t.$set(t.modifyData,"content",e)},expression:"modifyData.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.xiugaigongg=!1}}},[t._v(" 关闭 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.alerts()}}},[t._v(" 确定 ")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"","tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"100",align:"center"}}),i("el-table-column",{attrs:{prop:"content",label:"公告","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",{domProps:{innerHTML:t._s(e.row.content)}})]}}])}),i("el-table-column",{attrs:{prop:"linkUrl",label:"链接地址","min-width":"100",align:"center"}}),i("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.del(e)}}},[t._v(" 删除 ")])]}}])})],1)],1)},l=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"quill-upload",action:t.ossUploadUrl,headers:t.headers,multiple:!1,"list-type":"picture-card","show-file-list":!1,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.handleExceed,"on-progress":t.handleProgress}},[i("el-button",{attrs:{size:"small",type:"primary"}}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])],1),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.uillUpdateImg,expression:"uillUpdateImg"}]},[i("quillEditor",{ref:"myQuillEditor",staticStyle:{width:"100%",height:"600px"},attrs:{options:t.editorOption},on:{change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)},n=[],s=(i("a753"),i("8096"),i("14e1"),i("953d")),r=i("fa7d"),d=i("5f87"),c={props:{value:String},data:function(){return{ossUploadUrl:"".concat(r["a"].baseUrl,"/sysAdmin/uploadPictures"),headers:"",fileList:[],uillUpdateImg:!1,serverUrl:"",content:"",editorOption:{placeholder:"",theme:"snow",modules:{toolbar:{container:[["bold"],["italic"],["underline"],["strike"],[{list:"ordered"},{list:"bullet"}],["blockquote"],["code-block"],["link"],["image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}]],handlers:{image:function(t){t?document.querySelector("#quill-upload input").click():this.quill.format("image",!1)}}}}}}},components:{quillEditor:s["quillEditor"]},created:function(){this.headers={token:Object(d["a"])()}},watch:{value:function(t){this.initValue()}},mounted:function(){this.initValue(),console.log(r["a"],"baseURL")},methods:{initValue:function(){this.content=this.value},onEditorChange:function(t){t.quill;var e=t.html;t.text;this.content=e,this.$emit("input",e)},beforeUpload:function(){this.uillUpdateImg=!0},uploadError:function(){this.uillUpdateImg=!1,this.$message.error("图片插入失败")},handleProgress:function(t,e,i){console.log(e,i,"图片上传")},handleExceed:function(t,e,i){var o=this.$refs.myQuillEditor.quill;if(console.log(t),"SUCCEED"==t.status){var l=o.getSelection().index;o.insertEmbed(l,"image",t.result),console.log(o),o.setSelection(l+1)}else this.$message.error("图片插入失败");this.fileList=i,this.uillUpdateImg=!1}}},u=c,m=(i("83bb"),i("2877")),f=Object(m["a"])(u,a,n,!1,null,null,null),p=f.exports,g={components:{Quilleditor:p},data:function(){return{xiugaigongg:!1,dialogamend:!1,list:null,modifyData:{title:"",linkUrl:"",content:"",noticeType:"OFFICIAL",global:"CHINESE_SIM"}}},created:function(){this.getlist()},methods:{detail:function(t){this.modifyData=t.row;var e=t.row.id;this.modifyData.id=e,this.xiugaigongg=!0},alerts:function(){var t=this;""!=this.modifyData.content?""!=this.modifyData.title?""!=this.modifyData.linkUrl?(console.log(this.modifyData),this.modifyData.token=window.localStorage.getItem("token"),this.modifyData.userId=window.localStorage.getItem("userId"),this.$http.post1("/admin/sysAdmin/addNotice",this.modifyData).then((function(e){t.$message({message:"操作成功",type:"success"}),t.xiugaigongg=!1,t.getlist()})).catch((function(t){console.log(t)}))):this.$message.error("请输入链接"):this.$message.error("请输入标题"):this.$message.error("请输入公告")},tianjia:function(){this.modifyData.content="",this.modifyData.title="",this.modifyData.titleEn="",this.modifyData.id="",this.dialogamend=!0},amendList:function(){var t=this;""!=this.modifyData.content?""!=this.modifyData.title?""!=this.modifyData.linkUrl?(this.modifyData.token=window.localStorage.getItem("token"),this.modifyData.userId=window.localStorage.getItem("userId"),this.$http.post1("/admin/sysAdmin/addNotice",this.modifyData).then((function(e){t.$message({message:"操作成功",type:"success"}),t.dialogamend=!1,t.getlist()})).catch((function(t){console.log(t)}))):this.$message.error("请输入链接"):this.$message.error("请输入标题"):this.$message.error("请输入公告")},getlist:function(){var t=this;console.log(11),this.$http.get("/admin/sysAdmin/getNotices").then((function(e){t.list=e.result.records,console.log(e)})).catch((function(t){console.log(t)}))},del:function(t){var e=this,i=t.row.id;this.$http.post("/admin/sysAdmin/delNotice",{id:i}).then((function(t){e.$message({message:"公告删除成功",type:"success"}),e.getlist()})).catch((function(t){console.log(t)}))}}},h=g,y=(i("e0d4"),Object(m["a"])(h,o,l,!1,null,"23598734",null));e["default"]=y.exports},"83bb":function(t,e,i){"use strict";i("026a")},e0d4:function(t,e,i){"use strict";i("ea5e")},ea5e:function(t,e,i){}}]);